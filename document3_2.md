# **Telloドローンのプログラム説明資料**

  djitellipyライブラリを使わない手法です。  
  
下記のプログラムについての説明文書です。  
[basic_act_improvement.py](https://github.com/se-lina/for_school_2024/blob/main/basic_act_improvement.py)  
こちらのプログラムを確認しながらご覧ください。
  
## **このプログラムの目的**
このプログラムは、Telloドローンを使って簡単な動きを実現するためのものです。  
プログラムを実行すると、ドローンは以下の動きを順番に行います。  
1. 離陸
2. 前に100cm進む
3. 左に100cm移動する
4. 後ろに100cm戻る
5. 右に100cm移動する
6. 着陸

---

## **前回との対比、改善点（どの場所が変わったのか)**

### **1. バッテリーの確認ができるようになりました**
前回のプログラムでは、Telloのバッテリーが十分あるか確認しないままプログラムを実行していました。そのため、バッテリーが少ない場合、途中でドローンが動かなくなることがありました。

このプログラムでは、最初に「バッテリー残量」を確認するようにしました。もしバッテリーが20%以下だったら、飛行を中止して充電するようになっています。これで、より安全にドローンを飛ばせます。

---

### **2. ドローンが動く間に余裕を持たせました**
前回のプログラムでは、ドローンに命令を送る間隔が短かったため、動きが完了する前に次の命令が送られていました。このような場合、ドローンが正しく動かないことがあります。

今回のプログラムでは、各命令の後に**3秒間待つ**ようにしました。例えば、ドローンが前進した後、次の命令を送る前に十分な時間を与えています。これにより、ドローンが1つ1つの動作をしっかりと終えることができます。

---

### **3. 命令が届かない場合に再送信するようにしました**
WiFi通信の状況によっては、Telloが送られた命令を受け取らないことがあります。その場合、ドローンが動かなくなってしまいます。

このプログラムでは、命令を送った後に応答がない場合、自動的に**最大3回まで再送信**を試みます。これにより、WiFiが不安定な環境でも、ドローンが安定して動けるようになりました。

---

## **このプログラムがする動きの説明**

1. **離陸**  
   最初にドローンを地面から飛び上がらせます。これを「離陸」と言います。

2. **前進100cm**  
   ドローンが100cm（1メートル）まっすぐ前に進みます。

3. **左に100cm移動**  
   ドローンが横に100cm（1メートル）左に移動します。

4. **後進100cm**  
   ドローンが元の場所に戻るように後ろに100cm（1メートル）進みます。

5. **右に100cm移動**  
   最初の場所に戻るように右に100cm（1メートル）移動します。

6. **着陸**  
   ドローンがゆっくりと地面に降り、飛行を終えます。

---

## **どうしてこの改善が必要だったのか？**

### **バッテリー確認の重要性**
もしバッテリーが少ないまま飛ばすと、途中でドローンが止まったり、急に着陸したりすることがあります。  
それでは安全ではありません。このプログラムでは、バッテリー残量を確認し、低い場合は飛行を中止します。

---

### **命令間隔を調整した理由**
ドローンは動作に時間がかかる場合があります。例えば、「前進100cm」を行うには数秒必要です。  
その間に次の命令を送ると、ドローンが混乱して動かなくなることがあります。  
そこで、各動作の後に3秒の待ち時間を入れて、動作が確実に完了するようにしました。

---

### **再送信ロジックを追加した理由**
WiFiが不安定な場合、ドローンが命令を受け取らないことがあります。  
このプログラムでは、命令が届かなかった場合に再送信する仕組みを取り入れました。  
これにより、WiFi環境が悪い場合でも、ドローンが正しく動く確率が高くなりました。

---

## **使い方**
1. **Telloの電源を入れる**  
   Telloの電源を入れて、PCをTelloのWiFiに接続します。

2. **プログラムを実行する**  
   プログラムをPython環境で実行します。

3. **動作を確認する**  
   プログラムが順番通りに動作を行うか確認してください。

---

## **注意事項**
- 必ず広い場所で飛行させてください。障害物があるとドローンが衝突する可能性があります。
- バッテリー残量が少ない場合は、充電してから実行してください。
- 周囲のWiFiが混雑している場合、動作が不安定になることがあります。

